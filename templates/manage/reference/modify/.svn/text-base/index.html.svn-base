{% if reference %}
<form method="post">
	<input type="hidden" name="referenceID" id="referenceID" value="{{reference.id}}"/>
	<table class="table table-striped table-bordered table-condensed">
		<tr><td colspan="2"><a href="#" onClick="deleteReference('{{reference.id}}');"><span style="float:right">X</span></a></td></tr>
		<tr><td>Name:</td><td><input type="text" name="name" value="{{reference.name}}"/></td></tr>
		<tr><td>Refer to:</td><td><select name="objectID" class="objectID" onChange="loadAttribute();"><option value="" id="all" name="all" {% if reference.LBEObject == ''%} selected="selected" {% endif %}>All</option>{% for object in objects %}<option value="{{object.id}}" id="{{object.name}}" name="{{object.name}}" {% if reference.LBEObject == object %} selected="selected" {% endif %}>{{object.displayName}} ({{object.name}})</option> {% endfor %}</select></td></tr>
		<tr><td>Value to refer:</td><td><span class="referValue"><select name="attribute">{% for object in objects %}<optgroup label="{{object.displayName}} ({{object.name}})">{% for attr in attributes %} {% if attr.LBEObject == object and attr.LBEObjectAttribut.mandatory %}<option value="{{attr.LBEObjectAttribut.LDAPname}}" id="{{attr.LBEObjectAttribut.LDAPname}}" name="{{attr.LBEObjectAttribut.LDAPname}}" {% if reference.value == attr.LBEObjectAttribut.name and reference.LBEObject == object %} selected="selected" {% elif reference.value == attr.LBEObjectAttribut.name and not reference.LBEObject %} selected="selected" {% endif %}>{{attr.LBEObjectAttribut.name}} ({{attr.LBEObjectAttribut.LDAPname}})</option>  {% endif %}{% endfor %}</optgroup>{% endfor %}</select></span></td></tr>
	</table>
	<center><input type="submit" class="btn" value="Modify"/></center>
</form>
{% endif %}
